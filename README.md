## 开发日志

### 相关技术

1、Spring Boot

2、Thymeleaf

3、MyBatis

4、editor.md

5、mysql

5、bootstrap

## 系统功能

- 系统的后台
  - 用户管理：登录信息管理、用户资料管理、签到管理、收藏管理 
  - 论坛管理：帖子管理、回帖管理
  - 游戏管理：游戏信息管理、游戏评分管理
  - 系统管理：留言管理、版块管理、新闻资讯管理

- 前台
  - 登录注册
  - 查看游戏信息资讯
  - 查看游戏信息库
  - 查看论坛，并可以发布帖子、回复帖子、收藏帖子。
  - 查看自己的个人信息
  -  留言

## 数据库设计

1、用户（用户编号、用户名、用户密码、用户权限、注册时间）

2、用户资料（资料编号、用户编号、手机号、邮箱、性别、头像、个人简介）

3、游戏（游戏编号、游戏名、游戏简介、发售时间、开发商、发行商）

4、游戏评分（评分编号、游戏编号、用户编号、评分、评价、游玩状态）

5、回帖（回帖编号、主贴编号、用户编号、回帖内容、回帖时间）

6、版块（版块编号、版块名）

7、专题（专题编号、帖子编号、专题标题、专题简介、专题封面）

8、新闻资料（资料编号、帖子编号）

9、收藏帖子（收藏编号、主贴编号、用户编号）

10、签到（签到编号、用户编号、签到次数）

11、粉丝（编号、用户编号、粉丝编号、状态）

12、留言（留言编号、用户编号、留言内容）

13、帖子（帖子编号、帖子作者、帖子标题、帖子内容、发帖时间、帖子版块、游戏编号、用户编号）

### 用户表——user

| 列名       | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| ---------- | -------- | -------- | ---- | ---- | -------- |
| uid        | 用户编号 | int      | 11   | 是   | 否       |
| username   | 用户名   | varchar  | 20   | 否   | 否       |
| password   | 用户密码 | varchar  | 20   | 否   | 否       |
| power      | 用户权限 | varchar  | 10   | 否   | 否       |
| createtime | 注册时间 | datetime | 20   | 否   | 否       |

### 用户资料表——userdata

| 列名      | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| --------- | -------- | -------- | ---- | ---- | -------- |
| dataid    | 资料编号 | Int      | 11   | 是   | 否       |
| uid       | 用户编号 | Int      | 11   | 否   | 否       |
| phone     | 手机号   | varchar  | 20   | 否   | 是       |
| email     | 邮箱     | varchar  | 20   | 否   | 是       |
| gender    | 性别     | Int      | 11   | 否   | 是       |
| img       | 头像     | varchar  | 50   | 否   | 是       |
| autograph | 个人简介 | varchar  | 20   | 否   | 是       |

### 游戏表——games

| 列名      | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| --------- | -------- | -------- | ---- | ---- | -------- |
| g_id      | 游戏编号 | int      | 11   | 是   | 否       |
| g_name    | 游戏名   | varchar  | 20   | 否   | 是       |
| g_title   | 游戏简介 | varchar  | 20   | 否   | 是       |
| g_time    | 发售时间 | datetime | 20   | 否   | 是       |
| develop   | 开发商   | varchar  | 20   | 否   | 是       |
| publisher | 发行商   | varchar  | 20   | 否   | 是       |

### 游戏评分表——evaluate

| 列名      | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| --------- | -------- | -------- | ---- | ---- | -------- |
| eid       | 评分编号 | int      | 11   | 是   | 否       |
| g_id      | 游戏编号 | int      | 11   | 否   | 否       |
| uid       | 用户编号 | int      | 11   | 否   | 否       |
| fraction  | 评分     | varchar  | 20   | 否   | 是       |
| econtent  | 评价     | int      | 11   | 否   | 是       |
| gamestate | 游玩状态 | varchar  | 20   | 否   | 是       |

### 帖子表——article

| 列名    | 别名     | 数据类型  | 长度 | 主键 | 是否为空 |
| ------- | -------- | --------- | ---- | ---- | -------- |
| aid     | 帖子编号 | int       | 11   | 是   | 否       |
| author  | 帖子作者 | varchar   | 20   | 否   | 是       |
| title   | 帖子标题 | varchar   | 20   | 否   | 是       |
| content | 帖子内容 | logngtext | 50   | 否   | 是       |
| atime   | 发帖时间 | datetime  | 20   | 否   | 是       |
| sid     | 帖子版块 | int       | 11   | 否   | 否       |
| g_id    | 游戏编号 | int       | 11   | 否   | 否       |
| uid     | 用户编号 | int       | 11   | 否   | 否       |

### 回帖表——hpost

| 列名    | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| ------- | -------- | -------- | ---- | ---- | -------- |
| hid     | 回帖编号 | int      | 11   | 是   | 否       |
| aid     | 主贴编号 | int      | 11   | 否   | 否       |
| uid     | 用户编号 | int      | 11   | 否   | 否       |
| content | 回帖内容 | varchar  | 50   | 否   | 是       |
| htime   | 回帖时间 | datetime | 20   | 否   | 是       |

### 版块表——section

| 列名  | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| ----- | -------- | -------- | ---- | ---- | -------- |
| sid   | 版块编号 | int      | 11   | 是   | 否       |
| sname | 版块名   | varchar  | 20   | 否   | 否       |

### 专题表——special

| 列名      | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| --------- | -------- | -------- | ---- | ---- | -------- |
| sid       | 专题编号 | int      | 11   | 是   | 否       |
| aid       | 帖子编号 | int      | 11   | 否   | 否       |
| spectitle | 专题标题 | varchar  | 20   | 否   | 是       |
| speccont  | 专题简介 | varchar  | 20   | 否   | 是       |
| specimg   | 专题封面 | varchar  | 20   | 否   | 是       |

### 新闻资料表——news

| 列名 | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| ---- | -------- | -------- | ---- | ---- | -------- |
| nid  | 资讯编号 | int      | 11   | 是   | 否       |
| aid  | 帖子编号 | int      | 11   | 否   | 否       |

### 签到表——clock

| 列名   | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| ------ | -------- | -------- | ---- | ---- | -------- |
| cid    | 签到编号 | int      | 11   | 是   | 否       |
| uid    | 用户编号 | int      | 11   | 否   | 否       |
| clocks | 签到次数 | int      | 11   | 否   | 是       |

### 留言表——message

| 列名     | 别名     | 数据类型 | 长度 | 主键 | 是否为空 |
| -------- | -------- | -------- | ---- | ---- | -------- |
| mid      | 编号     | int      | 11   | 是   | 否       |
| uid      | 用户编号 | int      | 11   | 否   | 否       |
| mcontent | 留言内容 | int      | 11   | 否   | 否       |

## 项目遇到的问题

1、使用spring security进行项目的权限管理，失败。能够使用自带的方法进行登录，但不能注册新的用户。原因是密码加密问题和数据不知道提交到哪里。

2、使用Sa-Token进行项目的权限管理，失败。网上的教程没有，看源码的能力也没有，无从下手，放弃。

3、使用springboot自带的拦截器进行项目权限管理，暂定。

[(2条消息) spring boot重写addInterceptors()方法配置拦截器_耐心是一种美德-CSDN博客](https://blog.csdn.net/weixin_42950079/article/details/103735290)预想的是使用addInterceptor()方法,通过两套方法分别控制user、admin包下的拦截工作。满足有用户权限的只能访问user下的内容，有管理员权限的全都能访问。

出现的问题是不加拦截器可以正常登录，将登录信息写入session中，但加了拦截器就无法登录。
